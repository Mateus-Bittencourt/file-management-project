const calculateTimeDifference = (targetDate) => {
  const currentDate = new Date();
  const futureDate = new Date(targetDate);

  if (isNaN(targetDate)) {
    throw new Error('Invalid date format. Please use YYYY-MM-DD.');
  }

  if (futureDate <= currentDate) {
    throw new Error('The target date cannot be in the past.');
  }

  const diffInMillis = futureDate - currentDate
  const diffInMinutes = Math.floor(diffInMillis / 60_000)
  const days = Math.floor(diffInMinutes / 1440)
  const hours = Math.floor((diffInMinutes % 1440) / 60)
  const minutes = Math.floor(diffInMinutes % 60)

  return {
    days,
    hours,
    minutes
  }
}

module.exports = calculateTimeDifference
